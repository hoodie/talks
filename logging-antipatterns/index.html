<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>logging anti-patterns</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />

    <link rel="stylesheet" href="lib/reset.css" />
    <link rel="stylesheet" href="lib/reveal.css" />
    <!-- <link rel="stylesheet" href="lib/theme/black.css"> -->

    <link rel="stylesheet" href="theme/hoodie-solarized.css" />
    <link rel="stylesheet" href="theme/font-awesome/all.min.css" />
    <link rel="stylesheet" href="theme/tomorrow.css" />
    <link rel="stylesheet" href="theme/talk.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="lib/plugin/highlight/idea.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section
          id="title"
          class="black-slide"
          data-background-color="var(--background-color-dark)"
          data-transition="zoom"
          data-background-transition="zoom"
        >
          <section>🪵 Logging AntiPatterns</section>
          <section>
            🤔 AntiPattern Logging?
            <p>
              <small class="fragment">🧂 may contain hot takes</small>
            </p>
          </section>
        </section>

        <section>
          <aside class="notes">question round</aside>
          <ul>
            <li class="fragment fade-up" data-fragment-index="1">
              Do you have an app?
            </li>
            <li class="fragment fade-up" data-fragment-index="2">
              Do you run services in production?
            </li>
            <li class="fragment fade-up" data-fragment-index="3">
              Do you produce a lot of logs?
            </li>
            <!-- Do you log from clients? -->
            <li class="fragment fade-up" data-fragment-index="4">
              Do you read them regularly?
            </li>
            <li class="fragment fade-up" data-fragment-index="5">
              When do you have to read them?
            </li>
            <!-- <li class="fragment fade-up" data-fragment-index="6">
              Who reads them? <br />
              <span class="fragment fade-up" data-fragment-index="7">
                (devs/admins/ops/analysts/product/sales?)
              </span>
            </li> -->
          </ul>
        </section>

        <section id="unstructured-logging">
          <section
            class="black-slide"
            data-background-color="var(--background-color-dark)"
          >
            <h4>Beginning of the story</h4>
            <h3 class="fragment">we need to structure our logs better!!!</h3>

            <ul>
              <li class="fragment">
                Entwickler schreiben so unstrukturierte Logs 😕
              </li>
              <li class="fragment">die kann man ja gar nicht parsen 😤</li>
            </ul>
            <aside class="notes">
              <li>we had a session between different teams</li>
            </aside>
          </section>

          <section
            data-transition="slide-in fade-out"
            class="black-slide"
            data-background-color="var(--background-color-dark)"
          >
            <h4>Logging AntiPatterns</h4>
          </section>

          <!-- copy goes here -->
          <section data-transition="fade-in none-outjjj">
            <h4>basic unstructured logs</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG backend_service::service] everything fine
[2023-06-16T15:20:53Z INFO  backend_service::main] listening on 127.0.0.1 with https enabled true
[2023-06-16T15:20:53Z WARN  backend_service::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR backend_service::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>do not inline variables</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG backend_service::service] everything fine
[2023-06-16T15:20:53Z INFO  backend_service::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  backend_service::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR backend_service::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>be specific</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG backend_service::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG backend_service::service::transport] address available
[2023-06-16T15:20:53Z INFO  backend_service::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  backend_service::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR backend_service::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>give context</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG backend_service::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG backend_service::service::transport] address available
[2023-06-16T15:20:53Z INFO  backend_service::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  backend_service::worker::thread] session disconnected {user_id:"honeybear1998"}
[2023-06-16T15:20:53Z ERROR backend_service::worker::thread] failure occurred {msg: "failed to parse input", user_id: "honeybear1998", worker_id: 4}
</code></pre>
          </section>

          <section data-transition="none">
            <h4>do not reveal PII</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG backend_service::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG backend_service::service::transport] address available
[2023-06-16T15:20:53Z INFO  backend_service::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  backend_service::worker::thread] session disconnected {session_id:"D321D003-0083-484A-98F4-9153CD7409E0"}
[2023-06-16T15:20:53Z ERROR backend_service::worker::thread] failure occurred {msg: "failed to parse input", session_id: "D321D003-0083-484A-98F4-9153CD7409E0", worker_id: 4}
</code></pre>
          </section>

          <!-- copy goes here -->

          <section>
            <h2>Perfekt</h2>
            <p class="fragment">wir haben super strukturierte logs!</p>
            <strong class="fragment">TALK VORBEI!</strong>
          </section>
        </section>

        <section id="too-much-logging">
          <section>
            <h4>moment mal!</h4>
            <h3 class="fragment">
              we can't investigate, we don't have enough logs 🤷‍♂ ️
            </h3>
            <p class="fragment">
              lets just add more logs where we expect the error and wait
            </p>

            <aside class="notes">
              <li>
                often add logs to a system and wait for the error to occur
              </li>
            </aside>
          </section>

          <section>
            <h4>moment mal!!</h4>
            <h3 class="fragment">please remove your logs from the code 🫣</h3>

            <p class="fragment">
              <strong> 💵 💶 💸 </strong>
              <br />
              we are paying way too much for <code>$[LOGGING_PROVIDER]</code>
            </p>
            <p class="fragment">lets remove some logs again</p>

            <aside class="notes">
              <li>
                often add logs to a system and wait for the error to occur
              </li>
            </aside>
          </section>

          <section>
            <h4>moment mal!!!</h4>
            <h3 class="fragment">you broke our dashboard 😡</h3>
            <p class="fragment">
              by removing/rephrasing these logs our monitoring dashboard broke
            </p>
            <aside class="notes">
              <li>
                the logs were machine readable so somebody wrote code that read
                them
              </li>
              <li>
                now there is an unspoken contract between your log lines and
                other teams
              </li>
            </aside>
          </section>
        </section>

        <!--  -->

        <section id="cui-bono">
          <section>
            <h4>Cui Bono?</h4>
            <h3 class="fragment">Wer liest die logs die du schreibst?</h3>
            <p class="fragment">nur du selbst?</p>
            <ul>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: beim Entwicklen 🤔
              </li>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: beim debuggen 🙄
              </li>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: bei Post-mortem-Analysen 😵
              </li>
              <li class="fragment"><strong>DevOps</strong>: monitoring 🤪</li>
              <li class="fragment">
                <strong> Product MGMT</strong>: "wird das feature
                benutzt?"&nbsp;😭
              </li>
            </ul>
            <aside class="notes"></aside>
          </section>

          <section>
            <h5>Bonus</h5>
            <ul>
              <li class="fragment">
                <strong>🧑‍🎓Studierende</strong>: 5. Machine-Learning Diplomarbeit
              </li>
              <li class="fragment">
                Die <strong>User:in</strong> des Programms (audit logs) 🤯
              </li>
              <li class="fragment">
                Die <strong>Supervisor:in</strong> der
                <strong>User:in</strong> des Programms🤯
              </li>
              <li class="fragment">
                Die <strong>Kund:in</strong> der <strong>User:in</strong> des
                Programms 🤯
              </li>
            </ul>
          </section>

          <section>
            <h4>So viele Konsumenten 🫨</h4>
            <h3 class="fragment">
              Wie können unsere Logs nur die ganzen Erwartungen erfüllen?
            </h3>
            <strong class="fragment">nicht!</strong>
            <aside class="notes"></aside>
          </section>

          <section>
            <h3>
              logging ist <strong>ein</strong> Werkzeug
              <br />
              <span class="fragment">für <strong>eine</strong> Aufgabe</span>
            </h3>
          </section>

          <section>
            <h4>was nimmt man stattdessen?</h4>
            <table class="fragment">
              <thead>
                <tr>
                  <td>Tool</td>
                  <td>Methode</td>
                  <td>Use Case</td>
                  <td>Audience</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>log</td>
                  <td>
                    <code>error</code>, <code>warn</code>, <code>info</code>,
                    <code>log</code>, <code>debug</code>, <code>trace</code>,
                    <code>silly</code>
                  </td>
                  <td>development, debugging</td>
                  <td>developer</td>
                </tr>

                <tr>
                  <td>log</td>
                  <td>
                    <code>error</code>, <code>warn</code>, <code>info</code>,
                    (vielleicht <code>log</code>),
                  </td>
                  <td>post-mortem analysis</td>
                  <td>developer</td>
                </tr>

                <tr class="fragment">
                  <td><strong>kein&nbsp;logging</strong></td>
                  <td>prometheus, open-metrics...</td>
                  <td>metrics, monitoring</td>
                  <td>dev-ops</td>
                </tr>

                <tr class="fragment">
                  <td><strong>kein&nbsp;logging</strong></td>
                  <td>telemetry events</td>
                  <td>tool of your choice</td>
                  <td>product management</td>
                </tr>
              </tbody>
            </table>
          </section>

          <!-- <section data-markdown>
            <textarea>

|  code | Severity            | [RFC5424](https://datatracker.ietf.org/doc/html/rfc5424) |
| ----: | :------------------ | -------------------------------- |
| **0** | **`Emergency`**     | system is unusable               |
| **1** | **`Alert`**         | action must be taken immediately |
| **2** | **`Critical`**      | critical conditions              |
| **3** | **`Error`**         | error conditions               |
| **4** | **`Warning`**       | warning conditions               |
| **5** | **`Notice`**        | normal but significant condition |
| **6** | **`Informational`** | informational messages           |
| **7** | **`Debug`**         | debug-level messages             |
            </textarea>
          </section> -->
        </section>

        <!--  -->

        <section>
          <section>
            <h4>Zusammenfassung</h4>
            <h3 class="fragment">Logging IST das AntiPattern</h3>
            <aside class="notes">
              Vergleich mit Kommentaren "Kommentare zur Runtime"
            </aside>
          </section>
        </section>
        <!--  -->

        <section>
          <section>
            <h4></h4>
            <h3 class="fragment"></h3>
            <aside class="notes"></aside>
          </section>
        </section>
        <!--  -->

        <section>
          <section>
            <h4></h4>
            <h3 class="fragment"></h3>
            <aside class="notes"></aside>
          </section>
        </section>
        <!--  -->

        <section>
          <section>
            <h4></h4>
            <h3 class="fragment"></h3>
            <aside class="notes"></aside>
          </section>
        </section>
        <!--  -->
      </div>
    </div>

    <script src="lib/reveal.js"></script>
    <script src="lib/plugin/notes/notes.js"></script>
    <script src="lib/plugin/markdown/markdown.js"></script>
    <script src="lib/plugin/highlight/highlight.js"></script>
    <script src="rust-log-highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        slideNumber: true,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
        highlight: {
          beforeHighlight: (hljs) => rust_log(hljs),
        },
      });
    </script>
  </body>
</html>
