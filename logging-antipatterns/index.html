<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>logging anti-patterns</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />

    <link rel="stylesheet" href="lib/reset.css" />
    <link rel="stylesheet" href="lib/reveal.css" />
    <!-- <link rel="stylesheet" href="lib/theme/black.css"> -->

    <link rel="stylesheet" href="theme/hoodie-solarized.css" />
    <link rel="stylesheet" href="theme/font-awesome/all.min.css" />
    <link rel="stylesheet" href="theme/tomorrow.css" />
    <link rel="stylesheet" href="theme/talk.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="lib/plugin/highlight/idea.css" />
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section
          id="title"
          class="black-slide"
          data-background-color="var(--background-color-dark)"
          data-transition="zoom"
          data-background-transition="zoom"
        >
          <section>ğŸªµ Logging AntiPatterns</section>
          <section>
            ğŸ¤” AntiPattern Logging?
            <p>
              <small class="fragment">ğŸ§‚ may contain hot takes</small>
            </p>
          </section>
        </section>

        <section id="me" data-background-color="#ffffff"
        data-transition="zoom" >
        <aside class="notes" data-markdown></aside>
        <h3>
            <code> $whoami<span class="blinking">&block;</span> </code>
        </h3>
        <div style="background-image: url(./img/doodles.png); background-repeat: no-repeat">
            <ul style="list-style-type:none;">
                <li> <a href="https://www.hoodie.de"> ğŸ¤“ </a> Hendrik Sollich</li>
                <li> <a href="https://www.gotomeeting.com/"> ğŸ‘” </a> GoTo (GoToMeeting <i
                        class="fa fa-microphone-alt"></i>)</li>
                <li><a href="https://github.com/hoodie/"><i class="fab fa-github"></i></a> hoodie </li>
                <li><a href="https://chaos.social/@hoodie"><i class="fab fa-mastodon"></i></a> chaos.social/@hoodie </li>
                <li><a href="https://twitter.com/hoodie_de"><i class="fab fa-twitter"></i></a> @hoodie_de </li>
                <!-- <li class="fragment"><a href="https://akronymisier.bar"><i class="fa fa-headphones"></i></a> akronymisier.bar -->
                </li>
            </ul>
        </div>

    </section>




        <section>
          <h4>Fragerunde</h4>
          <aside class="notes">question round</aside>
          <ul>
            <li class="fragment fade-up"> Habt ihr ne App?</li>
            <li class="fragment fade-up"> Habt ihr services in production?  </li>
            <li class="fragment fade-up"> Produziert ihr viele Logs?  </li>
            <li class="fragment fade-up"> Lest ihr eure Logs?  </li>
            <li class="fragment fade-up"> Wann lest ihr eure Logs?  </li>
            <!-- <li class="fragment fade-up" >
              Who reads them? <br />
              <span class="fragment fade-up" >
                (devs/admins/ops/analysts/product/sales?)
              </span>
            </li> -->
          </ul>
        </section>

        <section id="unstructured-logging">
          <section
            class="black-slide"
            data-background-color="var(--background-color-dark)"
          >
            <h4>es war einmal...</h4>
            <h3 class="fragment">ğŸ‘¨ğŸ¼â€ğŸ’» wir brauchen besseres Logging!!!</h3>

            <ul>
              <li class="fragment">
                Entwickler schreiben so unstrukturierte Logs ğŸ˜•
              </li>
              <li class="fragment">die kann man ja gar nicht parsen ğŸ˜¤</li>
            </ul>
            <aside class="notes">
              <li>we had a session between different teams</li>
            </aside>
          </section>

          <section
            data-transition="slide-in fade-out"
            class="black-slide"
            data-background-color="var(--background-color-dark)"
          >
            <h4>Logging AntiPatterns</h4>
          </section>

          <!-- copy goes here -->
          <section data-transition="fade-in none-outjjj">
            <h4>klassische unstrukturierte Logs</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG app::service] everything fine
[2023-06-16T15:20:53Z INFO  app::main] listening on 127.0.0.1 with https enabled true
[2023-06-16T15:20:53Z WARN  app::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR app::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>Variablen nicht inlinen</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG app::service] everything fine
[2023-06-16T15:20:53Z INFO  app::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  app::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR app::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>spezifischere Zeilen</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG app::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG app::service::transport] address available
[2023-06-16T15:20:53Z INFO  app::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  app::worker::thread] session disconnected "honeybear1998"
[2023-06-16T15:20:53Z ERROR app::worker::thread] failure occurred
</code></pre>
          </section>

          <section data-transition="none">
            <h4>gebt Kontext</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG app::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG app::service::transport] address available
[2023-06-16T15:20:53Z INFO  app::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  app::worker::thread] session disconnected {user_id:"honeybear1998"}
[2023-06-16T15:20:53Z ERROR app::worker::thread] failure occurred {msg: "failed to parse input", user_id: "honeybear1998", worker_id: 4}
</code></pre>
          </section>

          <section data-transition="none">
            <h4>keine PII loggen!!!</h4>
            <pre><code class="rust-log small">
[2023-06-16T15:20:53Z DEBUG app::service::init] config loaded
[2023-06-16T15:20:53Z DEBUG app::service::transport] address available
[2023-06-16T15:20:53Z INFO  app::main] listening {https: true, ip:127.0.0.1}
[2023-06-16T15:20:53Z WARN  app::worker::thread] session disconnected {session_id:"D321D003-0083-484A-98F4-9153CD7409E0"}
[2023-06-16T15:20:53Z ERROR app::worker::thread] failure occurred {msg: "failed to parse input", session_id: "D321D003-0083-484A-98F4-9153CD7409E0", worker_id: 4}
</code></pre>
          </section>

          <!-- copy goes here -->

          <section>
            <h2>Weitere AntiPatterns</h2>
            <ul>
              <li class="fragment">Bezug auf vorherige LogZeilen</li>
              <li class="fragment">keine log-level, kein scope</li>
              <li class="fragment">eigener Logger</li>
              <li class="fragment">non-standard log-levels (<a href="https://datatracker.ietf.org/doc/html/rfc5424" class="fragment">RFC5424</a>)</li>
            </ul>

          </section>


          <section data-markdown>
            <textarea>

|  code | Severity            | [RFC5424](https://datatracker.ietf.org/doc/html/rfc5424) |
| ----: | :------------------ | -------------------------------- |
| **0** | **`Emergency`**     | system is unusable               |
| **1** | **`Alert`**         | action must be taken immediately |
| **2** | **`Critical`**      | critical conditions              |
| **3** | **`Error`**         | error conditions               |
| **4** | **`Warning`**       | warning conditions               |
| **5** | **`Notice`**        | normal but significant condition |
| **6** | **`Informational`** | informational messages           |
| **7** | **`Debug`**         | debug-level messages             |
            </textarea>
          </section>

          <section>
            <h2>Patterns</h2>
            <ul class="fragment">
              <li>Timestamps, Sequence Numbers</li>
              <li>LogLevel aus <code>.env</code></li>
              <li>im <code>else</code>-Block</li>
            </ul>
          </section>

          <section>
            <h2>Perfekt</h2>
            <p class="fragment">wir haben super strukturierte logs!</p>
            <strong class="fragment">TALK VORBEI!</strong>
          </section>

        </section>

        <section id="too-much-logging">
          <section>
            <h4>moment mal!</h4>
            <h3 class="fragment">
              wir kÃ¶nnen nicht investigieren, da sind nicht genug logs ğŸ¤·â€â™‚ ï¸
            </h3>
            <p class="fragment">
              ğŸ§‘â€ğŸ’» Ich fÃ¼r mal noch'n paar Logs hinzu, dann sehen wir mehr.
            </p>

            <aside class="notes">
              <li>
                often add logs to a system and wait for the error to occur
              </li>
            </aside>
          </section>

          <section>
            <h4>moment mal!!</h4>
            <h3 class="fragment">Wir loggen zu viel das ist teuer ğŸ«£</h3>

            <p class="fragment">
              <strong> ğŸ’µ ğŸ’¶ ğŸ’¸ </strong>
              <br />
              wir zahlen zu viel fÃ¼r <code>$[LOGGING_PROVIDER]</code>
            </p>
            <p class="fragment">ğŸ§‘â€ğŸ’»dann lÃ¶schen wir'n paar Logs!</p>
            <p class="fragment">aber welche?</p>

            <aside class="notes">
              <li>
                ğŸ§‘â€ğŸ’» often add logs to a system and wait for the error to occur
              </li>
            </aside>
          </section>

          <section id="moment-mal">
            <h4>moment mal!!!</h4>
            <h3 class="fragment">Jetzt ist unser Dashboard kaputt ğŸ˜¡</h3>
            <p class="fragment">
              die Logs hat irgendwer gelesen und ein Monitoring-/Product-Dashboard draus gemacht
            </p>
            <aside class="notes">
              <li>
                Die Logs waren ja Maschinenlesbar, also hat's ne Maschine gelesen.
              </li>
              <li>
                Jetzt gibt's unausgesprochene Contracts zwischen deinen Logs und anderen Teams
              </li>
            </aside>
          </section>
        </section>

        <!--  -->

        <section id="cui-bono">
          <section>
            <h4>Cui Bono?</h4>
            <h3 class="fragment">Wer liest die logs die du schreibst?</h3>
            <p class="fragment">nur du selbst?</p>
            <ul>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: beim Entwicklen ğŸ¤”
              </li>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: beim debuggen ğŸ™„
              </li>
              <li class="fragment">
                <strong>Entwickler:innen</strong>: bei Post-mortem-Analysen ğŸ˜µ
              </li>
              <li class="fragment"><strong>DevOps</strong>: monitoring ğŸ¤ª</li>
              <li class="fragment">
                <strong> Product MGMT</strong>: "wird das feature
                benutzt?"&nbsp;ğŸ˜­
              </li>
            </ul>
            <aside class="notes"></aside>
          </section>

          <section>
            <h5>Bonus</h5>
            <ul>
              <li class="fragment">
                <strong>ğŸ§‘â€ğŸ“Studierende</strong>: 5. Machine-Learning Diplomarbeit
              </li>
              <li class="fragment">
                Die <strong>User:in</strong> des Programms (audit logs) ğŸ¤¯
              </li>
              <li class="fragment">
                Die <strong>Supervisor:in</strong> der
                <strong>User:in</strong> des ProgrammsğŸ¤¯
              </li>
              <li class="fragment">
                Die <strong>Kund:in</strong> der <strong>User:in</strong> des
                Programms ğŸ¤¯
              </li>
            </ul>
          </section>

          <section>
            <h4>So viele Konsumenten ğŸ«¨</h4>
            <h3 class="fragment">
              Wie kÃ¶nnen unsere Logs nur die ganzen Erwartungen erfÃ¼llen?
            </h3>
            <strong class="fragment">nicht!</strong>
            <aside class="notes"></aside>
          </section>

          <section>
            <h3>
              logging ist <strong>ein</strong> Werkzeug
              <br />
              <span class="fragment">fÃ¼r <strong>eine</strong> Aufgabe</span>
            </h3>
          </section>

          <section>
            <h4>was nimmt man stattdessen?</h4>
            <table class="fragment">
              <thead>
                <tr>
                  <td>Tool</td>
                  <td>Methode</td>
                  <td>Use Case</td>
                  <td>Audience</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>log</td>
                  <td>
                    <code>error</code>, <code>warn</code>, <code>info</code>,
                    <code>debug</code>, <code>trace</code>,
                    <code>silly</code>
                  </td>
                  <td>development, debugging</td>
                  <td>developer</td>
                </tr>

                <tr>
                  <td>log</td>
                  <td>
                    <code>error</code>, <code>warn</code>, <code>info</code>
                  </td>
                  <td>post-mortem analysis</td>
                  <td>developer</td>
                </tr>

                <tr class="fragment">
                  <td><strong>kein&nbsp;logging</strong></td>
                  <td> <a href="https://www.chromium.org/developers/how-tos/trace-event-profiling-tool/">tracing</a> , sentry, etc</td>
                  <td>post-mortem analysis</td>
                  <td>developer</td>
                </tr>

                <tr class="fragment">
                  <td><strong>kein&nbsp;logging</strong></td>
                  <td>prometheus, open-metrics...</td>
                  <td>metrics, monitoring</td>
                  <td>dev-ops</td>
                </tr>

                <tr class="fragment">
                  <td><strong>kein&nbsp;logging</strong></td>
                  <td>telemetry events</td>
                  <td>tool of your choice</td>
                  <td>product management</td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>

        <!--  -->

        <section id="conclusion">
          <section>
            <h4>Zusammenfassung</h4>
            <h3 class="fragment">Logging IST das AntiPattern</h3>
            <aside class="notes">
              Vergleich mit Kommentaren "Kommentare zur Runtime"
            </aside>
          </section>
        </section>
        <!--  -->


        <!-- <section>
          <section>
            <h4></h4>
            <h3 class="fragment"></h3>
            <aside class="notes"></aside>
          </section>
        </section> -->
        <!--  -->
      </div>
    </div>

    <script src="lib/reveal.js"></script>
    <script src="lib/plugin/notes/notes.js"></script>
    <script src="lib/plugin/markdown/markdown.js"></script>
    <script src="lib/plugin/highlight/highlight.js"></script>
    <script src="rust-log-highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        slideNumber: true,
        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
        highlight: {
          beforeHighlight: (hljs) => rust_log(hljs),
        },
      });
    </script>
  </body>
</html>
